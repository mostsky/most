apk
META-INF
MostSky
system

###########################################
###############################################
#
# Magisk Module Template Config Script
# è«æ™¨
#
##########################################################################################
##########################################################################################
#
# Instructions:
#
# 1. Place your files into system folder (delete the placeholder file)
# 2. Fill in your module's info into module.prop
# 3. Configure the settings in this file (config.sh)
# 4. If you need boot scripts, add them into common/post-fs-data.sh or common/service.sh
# 5. Add your additional or modified system properties into common/system.prop
#
##########################################################################################

##########################################################################################
# Configs
##########################################################################################

# Set to true if you need to enable Magic Mount
# Most mods would like it to be enabled
SKIPMOUNT=false
#æ˜¯å¦å®‰è£…æ¨¡å—åè‡ªåŠ¨å…³é—­ï¼Œæ”¹ä¸ºtrueï¼Œå®‰è£…åä¸ä¼šè‡ªåŠ¨å‹¾é€‰å¯ç”¨

# Set to true if you need to load system.prop
PROPFILE=true
#æ˜¯å¦ä½¿ç”¨common/system.propæ–‡ä»¶

# Set to true if you need post-fs-data script
POSTFSDATA=false
#æ˜¯å¦ä½¿ç”¨post-fs-dataè„šæœ¬æ‰§è¡Œæ–‡ä»¶

# Set to true if you need late_start service script
LATESTARTSERVICE=true
#æ˜¯å¦åœ¨å¼€æœºæ—¶å€™å…è®¸å…è®¸common/service.shä¸­è„šæœ¬

##########################################################################################
# Installation Message
##########################################################################################

# Set what you want to show when installing your mod

print_modname() {
  ui_print "*******************************"
  ui_print "  Magisk Module:         "
  ui_print "  è«æ™¨"
  ui_print "*******************************"
}

##########################################################################################
# Replace list
##########################################################################################

# List all directories you want to directly replace in the system
# Check the documentations for more info about how Magic Mount works, and why you need this

# This is an example
REPLACE="
/system/app/Youtube
/system/priv-app/SystemUI
/system/priv-app/Settings
/system/framework
"

# Construct your own list here, it will override the example above
# !DO NOT! remove this if you don't need to replace anything, leave it empty as it is now
REPLACE="

"
#æ·»åŠ æ‚¨è¦ç²¾ç®€çš„APP/æ–‡ä»¶å¤¹ç›®å½•
#ä¾‹å¦‚ï¼šç²¾ç®€çŠ¶æ€æ ï¼Œæ‰¾åˆ°çŠ¶æ€æ ç›®å½•ä¸º  /system/priv-app/SystemUI/SystemUI.apk     
#è½¬åŒ–åŠ å…¥:/system/priv-app/SystemUI
#ï¼ˆå¯ä»¥æ­é…é«˜çº§è®¾ç½®è·å–APPç›®å½•ï¼‰

##########################################################################################
# Permissions
##########################################################################################
#é‡Šæ”¾æ–‡ä»¶ï¼Œæ™®é€šshellå‘½ä»¤
on_install() {
  ui_print "- æ­£åœ¨é‡Šæ”¾æ–‡ä»¶"
  unzip -o "$ZIPFILE" 'system/*' -d $MODPATH >&2
}

set_permissions() {
  # Only some special files require specific permissions
  # The default permissions should be good enough for most cases

  # Here are some examples for the set_perm functions:

  # set_perm_recursive  <dirname>                <owner> <group> <dirpermission> <filepermission> <contexts> (default: u:object_r:system_file:s0)
  # set_perm_recursive  $MODPATH/system/lib       0       0       0755            0644

  # set_perm  <filename>                         <owner> <group> <permission> <contexts> (default: u:object_r:system_file:s0)
  # set_perm  $MODPATH/system/bin/app_process32   0       2000    0755         u:object_r:zygote_exec:s0
  # set_perm  $MODPATH/system/bin/dex2oat         0       2000    0755         u:object_r:dex2oat_exec:s0
  # set_perm  $MODPATH/system/lib/libart.so       0       0       0644

  # The following is default permissions, DO NOT remove
  set_perm_recursive  $MODPATH  0  0  0755  0644
  
  #è®¾ç½®æƒé™ï¼ŒåŸºæœ¬ä¸è¦å»åŠ¨
}

##########################################################################################
# Custom Functions
##########################################################################################

# This file (config.sh) will be sourced by the main flash script after util_functions.sh
# If you need custom logic, please add them here as functions, and call these functions in
# update-binary. Refrain from adding code directly into update-binary, as it will make it
# difficult for you to migrate your modules to newer template versions.
# Make update-binary as clean as possible, try to only do function calls in it.

echo "æ­£åœ¨åˆ·å†™æ¨¡å—ä¸è¦ä¹±åŠ¨æ‰‹æœºå“¦ï¼"
echo"â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„"
echo"ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾"
echo"âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ğŸš¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸"
echo"ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°"
echo"æ­£åœ¨è·³è½¬"
echo"ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ˜ŒğŸ¤”ğŸ¤”ğŸ˜ŒğŸ˜ŒğŸ¤”ğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”"

#!/bin/bash

LINK="https://qm.qq.com/q/qoDPIv8zao"

if echo "$LINK" | grep -qE '^https?://'; then
    am start -a android.intent.action.VIEW -d "$LINK" >/dev/null 2>&1
    echo "å·²æ‰“QQç¾¤é“¾æ¥: $LINK"
else
    echo "æ— æ•ˆçš„é“¾æ¥æ ¼å¼: $LINK"
fi

sleep 8

LINK="https://b23.tv/ynHQCiC"

if echo "$LINK" | grep -qE '^https?://'; then
    am start -a android.intent.action.VIEW -d "$LINK" >/dev/null 2>&1
    echo "å·²æ‰“å¼€é“¾æ¥: $LINK"
else
    echo "æ— æ•ˆçš„é“¾æ¥æ ¼å¼: $LINK"
fi


sleep 5


  ui_print "- æ­£åœ¨è¿›å…¥bç«™ï¼Œç‚¹ä¸ªå…³æ³¨å§"

coolapkTesting=`pm list package | grep -w 'com.coolapk.market'`
  if [[ "$coolapkTesting" != "" ]];then
  am start -d 'coolmarket://u/39590720' >/dev/null 2>&1
  fi



sleep 5


echo "æ­£åœ¨åˆ·å…¥ä¸è¦é€€å‡º"

echo "ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸï¼Ÿ"
echo " "
echo "ğŸ‘‰ç‚¹å‡»éŸ³é‡ä¸Š ç¡®è®¤è£…äº†æ•‘ç –æ¨¡å—ï¼Œç»§ç»­å®‰è£…"
echo "ğŸ‘‰ç‚¹å‡»éŸ³é‡ä¸‹ æˆ‘æ²¡æœ‰è£…å‘€ï¼æ•‘å‘½å‘€ï¼é€€å‡ºå®‰è£…"
key_click=""
while [ -z "$key_click" ]; do
    key_click="$(getevent -qlc 1 | awk '/KEY_/{print $3}')"
    sleep 0.5
done
if [ "$key_click" = "KEY_VOLUMEUP" ]; then
echo " "
echo "å¼€å§‹åˆ·å…¥"
elif [ "$key_click" = "KEY_VOLUMEDOWN" ]; then
echo " "
echo "å–æ¶ˆåˆ·å…¥ã€‚"
exit 1
fi


sleep 1

echo "magiskè·Ÿlkmæ¨¡å¼ä¸èƒ½è£…susfsï¼Œæ˜¾ç¤ºå¤±è´¥æ­£å¸¸ã€‚"

sleep 1

echo "å®‰è£…susfså¡ä½äº†å¼€ä¸€ä¸‹vpnï¼Œæˆ–è€…ç›´æ¥æŠŠç½‘ç»œå…³é—­å†æ‰“å¼€"

#!/system/bin/sh

# è·å–è„šæœ¬è‡ªèº«æ‰€åœ¨çš„ç›®å½•
MODULE_DIR="$MODPATH"

# è®¾ç½®ç›®æ ‡ APK æ–‡ä»¶å¤¹è·¯å¾„
APK_DIR="$MODULE_DIR/apk"

# æ£€æŸ¥ APK æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
if [ ! -d "$APK_DIR" ]; then
    echo "é”™è¯¯ï¼šç›®å½• $APK_DIR ä¸å­˜åœ¨ï¼Œè¯·ç¡®ä¿è¯¥æ–‡ä»¶å¤¹å­˜åœ¨å¹¶åŒ…å« APK æ–‡ä»¶ã€‚"
    exit 1
fi

# æ£€æŸ¥ç›®å½•ä¸­æ˜¯å¦æœ‰ APK æ–‡ä»¶
APK_FILES=$(ls "$APK_DIR"/*.apk 2>/dev/null)

if [ -z "$APK_FILES" ]; then
    echo "é”™è¯¯ï¼šç›®å½• $APK_DIR ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»ä½• APK æ–‡ä»¶ã€‚"
    exit 1
fi


for APK_FILE in "$APK_DIR"/*.apk; do
    # è·³è¿‡éæ–‡ä»¶ï¼ˆé¿å…ç›®å½•æˆ–æ— æ•ˆè·¯å¾„ï¼‰
    if [ -f "$APK_FILE" ]; then
        echo "æ­£åœ¨å®‰è£… APK: $(basename "$APK_FILE")"
        pm install "$APK_FILE"
        # æ£€æŸ¥å®‰è£…ç»“æœ
        if [ $? -eq 0 ]; then
            echo "âœ… å®‰è£…æˆåŠŸ"
        else
            echo "âŒ å®‰è£…å¤±è´¥ï¼ˆé”™è¯¯ç ï¼š$?ï¼‰"
        fi
    fi
done


#!/system/bin/sh

# æ¨¡å—ç›®å½•
MODULE_DIR="$MODPATH/MostSky"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆAPatchç›¸å…³ï¼‰
AP_PKGS="me.bmax.apatch me.garfieldhan.apatch.next"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆKSU Nextç›¸å…³ï¼‰
KSU_NEXT_PKGS="com.sukisu.ultra com.rifsxd.ksunext"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆKSU Classicç›¸å…³ï¼‰
KSU_CLASSIC_PKGS="me.weishu.kernelsu"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆMagiskç›¸å…³ï¼‰
MAGISK_PKGS="com.topjohnwu.magisk io.github.vvb2060.magisk io.github.huskydg.magisk"

# æ£€æµ‹è¿è¡Œä¸­çš„ç¨‹åºï¼ˆè¿”å›ç¯å¢ƒç±»å‹ï¼‰
detect_running_env() {
    # æ£€æµ‹ä¼˜å…ˆçº§ï¼šAPatch > KSU Next > KSU Classic > Magisk
    
    # 1. æ£€æµ‹APatchç¨‹åº
    for pkg in $AP_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ap"
            return
        fi
    done
    
    # 2. æ£€æµ‹KSU Nextç¨‹åº
    for pkg in $KSU_NEXT_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ksu_next"
            return
        fi
    done
    
    # 3. æ£€æµ‹KSU Classicç¨‹åº
    for pkg in $KSU_CLASSIC_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ksu_classic"
            return
        fi
    done
    
    # 4. æ£€æµ‹Magiskç›¸å…³ç¨‹åº
    for pkg in $MAGISK_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "magisk"
            return
        fi
    done
    
    # æœªæ£€æµ‹åˆ°
    echo "unknown"
}

# ä¸»å®‰è£…é€»è¾‘
main() {
    # è·å–ç¯å¢ƒç±»å‹
    ENV_TYPE=$(detect_running_env)
    if [ "$ENV_TYPE" = "unknown" ]; then
        ui_print "æœªæ£€æµ‹åˆ°è¿è¡Œä¸­çš„ç®¡ç†ç¨‹åºï¼Œå°†å°è¯•é»˜è®¤å®‰è£…æ–¹å¼..."
    else
        ui_print "æ£€æµ‹åˆ°ç¯å¢ƒç±»å‹ï¼š$ENV_TYPE"
    fi

    # æ£€æŸ¥æ¨¡å—ç›®å½•åŠZIPæ–‡ä»¶
    if [ ! -d "$MODULE_DIR" ] || ! ls "$MODULE_DIR"/*.zip >/dev/null 2>&1; then
        ui_print "é”™è¯¯ï¼š$MODULE_DIR ä¸­æ— ZIPæ¨¡å—"
        exit 1
    fi

    # è¯»å–ä¸»æ¨¡å—ä¿¡æ¯
    MODULE_PROP="$MODPATH/module.prop"
    if [ -f "$MODULE_PROP" ]; then
        MODULE_NAME=$(grep "name=" "$MODULE_PROP" | cut -d '=' -f2)
        MODULE_VERSION=$(grep "version=" "$MODULE_PROP" | cut -d '=' -f2)
        ui_print "ä¸»æ¨¡å—ï¼š$MODULE_NAME v$MODULE_VERSION"
    fi

    # éå†å®‰è£…MostSkyç›®å½•ä¸‹çš„æ‰€æœ‰ZIPæ¨¡å—
    ui_print "å¼€å§‹å®‰è£…å­æ¨¡å—..."
    for ZIPFILE in "$MODULE_DIR"/*.zip; do
        [ -f "$ZIPFILE" ] || continue
        SUB_MOD_NAME=$(basename "$ZIPFILE" .zip)
        ui_print "å¤„ç†å­æ¨¡å—ï¼š$SUB_MOD_NAME"

        if [ "$ENV_TYPE" = "unknown" ]; then
            # æœªæ£€æµ‹åˆ°ç¯å¢ƒæ—¶ï¼Œå…ˆå°è¯•KSU Classicæ–¹å¼
            ui_print "å°è¯•KSU Classicæ–¹å¼å®‰è£…..."
            install_module "$ZIPFILE" >/dev/null 2>&1
            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME ç”¨KSU Classicæ–¹å¼å®‰è£…æˆåŠŸ"
                continue
            fi
            
            # KSU Classicå¤±è´¥ï¼Œå°è¯•Magiskæ–¹å¼
            ui_print "KSU Classicæ–¹å¼å¤±è´¥ï¼Œå°è¯•Magiskæ–¹å¼..."
            magisk --install-module "$ZIPFILE" >/dev/null 2>&1
            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME ç”¨Magiskæ–¹å¼å®‰è£…æˆåŠŸ"
            else
                ui_print "âŒ $SUB_MOD_NAME ä¸¤ç§æ–¹å¼å‡å®‰è£…å¤±è´¥"
            fi
        else
            # å·²çŸ¥ç¯å¢ƒç±»å‹ï¼ŒæŒ‰å¯¹åº”æ–¹å¼å®‰è£…
            case "$ENV_TYPE" in
                "magisk")
                    magisk --install-module "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ksu_classic")
                    install_module "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ksu_next")
                    /data/adb/ksud module install "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ap")
                    /data/adb/apd module install "$ZIPFILE" >/dev/null 2>&1
                    ;;
            esac

            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME å®‰è£…æˆåŠŸ"
            else
                ui_print "âŒ $SUB_MOD_NAME å®‰è£…å¤±è´¥"
            fi
        fi
    done

    ui_print "æ‰€æœ‰æ“ä½œå®Œæˆ"
}

# æ‰§è¡Œä¸»é€»è¾‘
main



#!/bin/bash

# è·å– ro.boot.vbmeta.digest çš„å€¼
HASH_VALUE=$(getprop ro.boot.vbmeta.digest)

# ç¡®ä¿ MODPATH å˜é‡å·²è®¾ç½®
if [ -z "$MODPATH" ]; then
    echo "é”™è¯¯: MODPATH å˜é‡æœªè®¾ç½®ã€‚è¯·è®¾ç½® MODPATH æŒ‡å‘ç›®æ ‡ç›®å½•ã€‚"
    exit 1
fi

# å®šä¹‰ system.prop æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
SYSTEM_PROP_FILE="$MODPATH/system.prop"

# æ£€æŸ¥ system.prop æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶
if [ ! -f "$SYSTEM_PROP_FILE" ]; then
    touch "$SYSTEM_PROP_FILE"
    if [ $? -ne 0 ]; then
        echo "é”™è¯¯: æ— æ³•åˆ›å»ºæ–‡ä»¶ $SYSTEM_PROP_FILE"
        exit 1
    fi
fi

# å°†å“ˆå¸Œå€¼å†™å…¥ system.prop æ–‡ä»¶
echo "ro.boot.vbmeta.digest=$HASH_VALUE" > "$SYSTEM_PROP_FILE"

# æ£€æŸ¥å†™å…¥æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "æˆåŠŸ: å“ˆå¸Œå€¼å·²å†™å…¥ $SYSTEM_PROP_FILE"
else
    echo "é”™è¯¯: æ— æ³•å†™å…¥åˆ° $SYSTEM_PROP_FILE"
    exit 1
fi

# å°† ro.boot.veritymode=enforcing è¿½åŠ å†™å…¥åˆ° system.prop æ–‡ä»¶
echo "ro.boot.veritymode=enforcing" >> "$SYSTEM_PROP_FILE"

# æ£€æŸ¥è¿½åŠ å†™å…¥æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "æˆåŠŸ: ro.boot.veritymode=enforcing å·²è¿½åŠ å†™å…¥ $SYSTEM_PROP_FILE"
else
    echo "é”™è¯¯: æ— æ³•è¿½åŠ å†™å…¥åˆ° $SYSTEM_PROP_FILE"
    exit 1
fi


MODPATH=$(dirname $0)
AVBCTL="$MODPATH/system/bin/avbctl"

[ -x "$AVBCTL" ] ||  

"$AVBCTL" disable-verity --force >/dev/null 2>&1
"$AVBCTL" disable-verification --force >/dev/null 2>&1









echo " "
echo " "
echo " "
echo " ä½œè€… bç«™@è«æ™¨åˆèœåˆçˆ±ç©"
echo " "
echo " "
echo "è«æ™¨ä¸€é”®éšè—æ¨¡å—æ›´æ–°ä»‹ç» v1.0.0"

echo " "

echo "1.æ›´æ–°zygisk1.3.0æ­£å¼ç‰ˆ æ›´æ–°éšè—åº”ç”¨åˆ—è¡¨æ­£ç‰ˆæœ€æ–°ç‰ˆ3.6.1 æ›´æ–°Ticky store1.4.1 SUSFS-FOR-KERNELSU-v1.5.2-R23ï¼Œæ›´æ–°hunter6.46"

echo " "

echo "2.æ›´æ”¹å›å¼€æœºè‡ªåŠ¨æ›´æ–°éšè—åº”ç”¨åˆ—è¡¨é…ç½®ï¼Œæ‰§è¡Œæ“ä½œæŒ‰é’®æ‰æ›´æ–°é…ç½®"

echo " "

echo "3.è‡ªåŠ¨åˆ é™¤ç›®æ ‡targetæ¸¸æˆåŒ…å"

echo " "

echo "4.å¢åŠ è«æ™¨ä¸€é”®éšè—ç¯å¢ƒé»‘åå•é…ç½®"

echo " "

echo " "

echo "æœ¬æ¨¡å—ä¸€é”®å®‰è£…è¿‡ç¯å¢ƒç»å…¸å¿…å¤‡å¥—è£… "

echo " "

echo "éšè—ä¸»åŠ›å½“ç„¶æ˜¯susfsï¼Œshamkio"

echo " "

echo "é…åˆä¸€äº›ç¯å¢ƒå°é…ç½®ã€‚å“ˆå¸Œå€¼æœ‰æ•ˆkeyç­‰ã€‚ "

echo " "

echo "è¯¦ç»†æ“ä½œè¯·æŸ¥çœ‹ä½¿ç”¨è¯´æ˜æ•™ç¨‹å›¾ç‰‡æ–‡ä»¶ "

echo " "

echo "ç®€å•æ¥è¯´å°±å¼€æœºäº†ï¼Œæ¿€æ´»éšè—åº”ç”¨åˆ—è¡¨appã€‚ç‚¹æ“ä½œæŒ‰é’®åŠ å…¥é…ç½®"


echo " "

echo " ç„¶åå†æ¬¡é‡å¯å¯åŠ¨éšè—åº”ç”¨åˆ—è¡¨app,è«æ™¨ç¯å¢ƒéšè—app"

echo " "
echo " ç„¶åå°è¯•æ‹¦æˆªæœ‰æ¬¡æ•°å°±è¡Œäº†"

echo " "

echo " æ„Ÿè°¢ä½¿ç”¨ï¼Œæ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨"
echo " "
echo " "
echo " "
echo " "
echo " "##########################################################################################
#
# Magisk Module Template Config Script
# è«æ™¨
#
##########################################################################################
##########################################################################################
#
# Instructions:
#
# 1. Place your files into system folder (delete the placeholder file)
# 2. Fill in your module's info into module.prop
# 3. Configure the settings in this file (config.sh)
# 4. If you need boot scripts, add them into common/post-fs-data.sh or common/service.sh
# 5. Add your additional or modified system properties into common/system.prop
#
##########################################################################################

##########################################################################################
# Configs
##########################################################################################

# Set to true if you need to enable Magic Mount
# Most mods would like it to be enabled
SKIPMOUNT=false
#æ˜¯å¦å®‰è£…æ¨¡å—åè‡ªåŠ¨å…³é—­ï¼Œæ”¹ä¸ºtrueï¼Œå®‰è£…åä¸ä¼šè‡ªåŠ¨å‹¾é€‰å¯ç”¨

# Set to true if you need to load system.prop
PROPFILE=true
#æ˜¯å¦ä½¿ç”¨common/system.propæ–‡ä»¶

# Set to true if you need post-fs-data script
POSTFSDATA=false
#æ˜¯å¦ä½¿ç”¨post-fs-dataè„šæœ¬æ‰§è¡Œæ–‡ä»¶

# Set to true if you need late_start service script
LATESTARTSERVICE=true
#æ˜¯å¦åœ¨å¼€æœºæ—¶å€™å…è®¸å…è®¸common/service.shä¸­è„šæœ¬

##########################################################################################
# Installation Message
##########################################################################################

# Set what you want to show when installing your mod

print_modname() {
  ui_print "*******************************"
  ui_print "  Magisk Module:         "
  ui_print "  è«æ™¨"
  ui_print "*******************************"
}

##########################################################################################
# Replace list
##########################################################################################

# List all directories you want to directly replace in the system
# Check the documentations for more info about how Magic Mount works, and why you need this

# This is an example
REPLACE="
/system/app/Youtube
/system/priv-app/SystemUI
/system/priv-app/Settings
/system/framework
"

# Construct your own list here, it will override the example above
# !DO NOT! remove this if you don't need to replace anything, leave it empty as it is now
REPLACE="

"
#æ·»åŠ æ‚¨è¦ç²¾ç®€çš„APP/æ–‡ä»¶å¤¹ç›®å½•
#ä¾‹å¦‚ï¼šç²¾ç®€çŠ¶æ€æ ï¼Œæ‰¾åˆ°çŠ¶æ€æ ç›®å½•ä¸º  /system/priv-app/SystemUI/SystemUI.apk     
#è½¬åŒ–åŠ å…¥:/system/priv-app/SystemUI
#ï¼ˆå¯ä»¥æ­é…é«˜çº§è®¾ç½®è·å–APPç›®å½•ï¼‰

##########################################################################################
# Permissions
##########################################################################################
#é‡Šæ”¾æ–‡ä»¶ï¼Œæ™®é€šshellå‘½ä»¤
on_install() {
  ui_print "- æ­£åœ¨é‡Šæ”¾æ–‡ä»¶"
  unzip -o "$ZIPFILE" 'system/*' -d $MODPATH >&2
}

set_permissions() {
  # Only some special files require specific permissions
  # The default permissions should be good enough for most cases

  # Here are some examples for the set_perm functions:

  # set_perm_recursive  <dirname>                <owner> <group> <dirpermission> <filepermission> <contexts> (default: u:object_r:system_file:s0)
  # set_perm_recursive  $MODPATH/system/lib       0       0       0755            0644

  # set_perm  <filename>                         <owner> <group> <permission> <contexts> (default: u:object_r:system_file:s0)
  # set_perm  $MODPATH/system/bin/app_process32   0       2000    0755         u:object_r:zygote_exec:s0
  # set_perm  $MODPATH/system/bin/dex2oat         0       2000    0755         u:object_r:dex2oat_exec:s0
  # set_perm  $MODPATH/system/lib/libart.so       0       0       0644

  # The following is default permissions, DO NOT remove
  set_perm_recursive  $MODPATH  0  0  0755  0644
  
  #è®¾ç½®æƒé™ï¼ŒåŸºæœ¬ä¸è¦å»åŠ¨
}

##########################################################################################
# Custom Functions
##########################################################################################

# This file (config.sh) will be sourced by the main flash script after util_functions.sh
# If you need custom logic, please add them here as functions, and call these functions in
# update-binary. Refrain from adding code directly into update-binary, as it will make it
# difficult for you to migrate your modules to newer template versions.
# Make update-binary as clean as possible, try to only do function calls in it.

echo "æ­£åœ¨åˆ·å†™æ¨¡å—ä¸è¦ä¹±åŠ¨æ‰‹æœºå“¦ï¼"
echo"â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„â›„"
echo"ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾ğŸ¾"
echo"âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ğŸš¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸ğŸš¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸âš ï¸"
echo"ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°ğŸ¥°"
echo"æ­£åœ¨è·³è½¬"
echo"ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ˜ŒğŸ¤”ğŸ¤”ğŸ˜ŒğŸ˜ŒğŸ¤”ğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ˜ŒğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”"

#!/bin/bash

LINK="https://qm.qq.com/q/qoDPIv8zao"

if echo "$LINK" | grep -qE '^https?://'; then
    am start -a android.intent.action.VIEW -d "$LINK" >/dev/null 2>&1
    echo "å·²æ‰“QQç¾¤é“¾æ¥: $LINK"
else
    echo "æ— æ•ˆçš„é“¾æ¥æ ¼å¼: $LINK"
fi

sleep 8

LINK="https://b23.tv/ynHQCiC"

if echo "$LINK" | grep -qE '^https?://'; then
    am start -a android.intent.action.VIEW -d "$LINK" >/dev/null 2>&1
    echo "å·²æ‰“å¼€é“¾æ¥: $LINK"
else
    echo "æ— æ•ˆçš„é“¾æ¥æ ¼å¼: $LINK"
fi


sleep 5


  ui_print "- æ­£åœ¨è¿›å…¥bç«™ï¼Œç‚¹ä¸ªå…³æ³¨å§"

coolapkTesting=`pm list package | grep -w 'com.coolapk.market'`
  if [[ "$coolapkTesting" != "" ]];then
  am start -d 'coolmarket://u/39590720' >/dev/null 2>&1
  fi



sleep 5


echo "æ­£åœ¨åˆ·å…¥ä¸è¦é€€å‡º"

echo "ğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸğŸï¼Ÿ"
echo " "
echo "ğŸ‘‰ç‚¹å‡»éŸ³é‡ä¸Š ç¡®è®¤è£…äº†æ•‘ç –æ¨¡å—ï¼Œç»§ç»­å®‰è£…"
echo "ğŸ‘‰ç‚¹å‡»éŸ³é‡ä¸‹ æˆ‘æ²¡æœ‰è£…å‘€ï¼æ•‘å‘½å‘€ï¼é€€å‡ºå®‰è£…"
key_click=""
while [ -z "$key_click" ]; do
    key_click="$(getevent -qlc 1 | awk '/KEY_/{print $3}')"
    sleep 0.5
done
if [ "$key_click" = "KEY_VOLUMEUP" ]; then
echo " "
echo "å¼€å§‹åˆ·å…¥"
elif [ "$key_click" = "KEY_VOLUMEDOWN" ]; then
echo " "
echo "å–æ¶ˆåˆ·å…¥ã€‚"
exit 1
fi


sleep 1

echo "magiskè·Ÿlkmæ¨¡å¼ä¸èƒ½è£…susfsï¼Œæ˜¾ç¤ºå¤±è´¥æ­£å¸¸ã€‚"

sleep 1

echo "å®‰è£…susfså¡ä½äº†å¼€ä¸€ä¸‹vpnï¼Œæˆ–è€…ç›´æ¥æŠŠç½‘ç»œå…³é—­å†æ‰“å¼€"

#!/system/bin/sh

# è·å–è„šæœ¬è‡ªèº«æ‰€åœ¨çš„ç›®å½•
MODULE_DIR="$MODPATH"

# è®¾ç½®ç›®æ ‡ APK æ–‡ä»¶å¤¹è·¯å¾„
APK_DIR="$MODULE_DIR/apk"

# æ£€æŸ¥ APK æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨
if [ ! -d "$APK_DIR" ]; then
    echo "é”™è¯¯ï¼šç›®å½• $APK_DIR ä¸å­˜åœ¨ï¼Œè¯·ç¡®ä¿è¯¥æ–‡ä»¶å¤¹å­˜åœ¨å¹¶åŒ…å« APK æ–‡ä»¶ã€‚"
    exit 1
fi

# æ£€æŸ¥ç›®å½•ä¸­æ˜¯å¦æœ‰ APK æ–‡ä»¶
APK_FILES=$(ls "$APK_DIR"/*.apk 2>/dev/null)

if [ -z "$APK_FILES" ]; then
    echo "é”™è¯¯ï¼šç›®å½• $APK_DIR ä¸­æ²¡æœ‰æ‰¾åˆ°ä»»ä½• APK æ–‡ä»¶ã€‚"
    exit 1
fi


for APK_FILE in "$APK_DIR"/*.apk; do
    # è·³è¿‡éæ–‡ä»¶ï¼ˆé¿å…ç›®å½•æˆ–æ— æ•ˆè·¯å¾„ï¼‰
    if [ -f "$APK_FILE" ]; then
        echo "æ­£åœ¨å®‰è£… APK: $(basename "$APK_FILE")"
        pm install "$APK_FILE"
        # æ£€æŸ¥å®‰è£…ç»“æœ
        if [ $? -eq 0 ]; then
            echo "âœ… å®‰è£…æˆåŠŸ"
        else
            echo "âŒ å®‰è£…å¤±è´¥ï¼ˆé”™è¯¯ç ï¼š$?ï¼‰"
        fi
    fi
done


#!/system/bin/sh

# æ¨¡å—ç›®å½•
MODULE_DIR="$MODPATH/MostSky"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆAPatchç›¸å…³ï¼‰
AP_PKGS="me.bmax.apatch me.garfieldhan.apatch.next"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆKSU Nextç›¸å…³ï¼‰
KSU_NEXT_PKGS="com.sukisu.ultra com.rifsxd.ksunext"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆKSU Classicç›¸å…³ï¼‰
KSU_CLASSIC_PKGS="me.weishu.kernelsu"

# å®šä¹‰éœ€è¦æ£€æµ‹çš„åŒ…åï¼ˆMagiskç›¸å…³ï¼‰
MAGISK_PKGS="com.topjohnwu.magisk io.github.vvb2060.magisk io.github.huskydg.magisk"

# æ£€æµ‹è¿è¡Œä¸­çš„ç¨‹åºï¼ˆè¿”å›ç¯å¢ƒç±»å‹ï¼‰
detect_running_env() {
    # æ£€æµ‹ä¼˜å…ˆçº§ï¼šAPatch > KSU Next > KSU Classic > Magisk
    
    # 1. æ£€æµ‹APatchç¨‹åº
    for pkg in $AP_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ap"
            return
        fi
    done
    
    # 2. æ£€æµ‹KSU Nextç¨‹åº
    for pkg in $KSU_NEXT_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ksu_next"
            return
        fi
    done
    
    # 3. æ£€æµ‹KSU Classicç¨‹åº
    for pkg in $KSU_CLASSIC_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "ksu_classic"
            return
        fi
    done
    
    # 4. æ£€æµ‹Magiskç›¸å…³ç¨‹åº
    for pkg in $MAGISK_PKGS; do
        if pidof "$pkg" >/dev/null 2>&1; then
            echo "magisk"
            return
        fi
    done
    
    # æœªæ£€æµ‹åˆ°
    echo "unknown"
}

# ä¸»å®‰è£…é€»è¾‘
main() {
    # è·å–ç¯å¢ƒç±»å‹
    ENV_TYPE=$(detect_running_env)
    if [ "$ENV_TYPE" = "unknown" ]; then
        ui_print "æœªæ£€æµ‹åˆ°è¿è¡Œä¸­çš„ç®¡ç†ç¨‹åºï¼Œå°†å°è¯•é»˜è®¤å®‰è£…æ–¹å¼..."
    else
        ui_print "æ£€æµ‹åˆ°ç¯å¢ƒç±»å‹ï¼š$ENV_TYPE"
    fi

    # æ£€æŸ¥æ¨¡å—ç›®å½•åŠZIPæ–‡ä»¶
    if [ ! -d "$MODULE_DIR" ] || ! ls "$MODULE_DIR"/*.zip >/dev/null 2>&1; then
        ui_print "é”™è¯¯ï¼š$MODULE_DIR ä¸­æ— ZIPæ¨¡å—"
        exit 1
    fi

    # è¯»å–ä¸»æ¨¡å—ä¿¡æ¯
    MODULE_PROP="$MODPATH/module.prop"
    if [ -f "$MODULE_PROP" ]; then
        MODULE_NAME=$(grep "name=" "$MODULE_PROP" | cut -d '=' -f2)
        MODULE_VERSION=$(grep "version=" "$MODULE_PROP" | cut -d '=' -f2)
        ui_print "ä¸»æ¨¡å—ï¼š$MODULE_NAME v$MODULE_VERSION"
    fi

    # éå†å®‰è£…MostSkyç›®å½•ä¸‹çš„æ‰€æœ‰ZIPæ¨¡å—
    ui_print "å¼€å§‹å®‰è£…å­æ¨¡å—..."
    for ZIPFILE in "$MODULE_DIR"/*.zip; do
        [ -f "$ZIPFILE" ] || continue
        SUB_MOD_NAME=$(basename "$ZIPFILE" .zip)
        ui_print "å¤„ç†å­æ¨¡å—ï¼š$SUB_MOD_NAME"

        if [ "$ENV_TYPE" = "unknown" ]; then
            # æœªæ£€æµ‹åˆ°ç¯å¢ƒæ—¶ï¼Œå…ˆå°è¯•KSU Classicæ–¹å¼
            ui_print "å°è¯•KSU Classicæ–¹å¼å®‰è£…..."
            install_module "$ZIPFILE" >/dev/null 2>&1
            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME ç”¨KSU Classicæ–¹å¼å®‰è£…æˆåŠŸ"
                continue
            fi
            
            # KSU Classicå¤±è´¥ï¼Œå°è¯•Magiskæ–¹å¼
            ui_print "KSU Classicæ–¹å¼å¤±è´¥ï¼Œå°è¯•Magiskæ–¹å¼..."
            magisk --install-module "$ZIPFILE" >/dev/null 2>&1
            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME ç”¨Magiskæ–¹å¼å®‰è£…æˆåŠŸ"
            else
                ui_print "âŒ $SUB_MOD_NAME ä¸¤ç§æ–¹å¼å‡å®‰è£…å¤±è´¥"
            fi
        else
            # å·²çŸ¥ç¯å¢ƒç±»å‹ï¼ŒæŒ‰å¯¹åº”æ–¹å¼å®‰è£…
            case "$ENV_TYPE" in
                "magisk")
                    magisk --install-module "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ksu_classic")
                    install_module "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ksu_next")
                    /data/adb/ksud module install "$ZIPFILE" >/dev/null 2>&1
                    ;;
                "ap")
                    /data/adb/apd module install "$ZIPFILE" >/dev/null 2>&1
                    ;;
            esac

            if [ $? -eq 0 ]; then
                ui_print "âœ… $SUB_MOD_NAME å®‰è£…æˆåŠŸ"
            else
                ui_print "âŒ $SUB_MOD_NAME å®‰è£…å¤±è´¥"
            fi
        fi
    done

    ui_print "æ‰€æœ‰æ“ä½œå®Œæˆ"
}

# æ‰§è¡Œä¸»é€»è¾‘
main



#!/bin/bash

# è·å– ro.boot.vbmeta.digest çš„å€¼
HASH_VALUE=$(getprop ro.boot.vbmeta.digest)

# ç¡®ä¿ MODPATH å˜é‡å·²è®¾ç½®
if [ -z "$MODPATH" ]; then
    echo "é”™è¯¯: MODPATH å˜é‡æœªè®¾ç½®ã€‚è¯·è®¾ç½® MODPATH æŒ‡å‘ç›®æ ‡ç›®å½•ã€‚"
    exit 1
fi

# å®šä¹‰ system.prop æ–‡ä»¶çš„å®Œæ•´è·¯å¾„
SYSTEM_PROP_FILE="$MODPATH/system.prop"

# æ£€æŸ¥ system.prop æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶
if [ ! -f "$SYSTEM_PROP_FILE" ]; then
    touch "$SYSTEM_PROP_FILE"
    if [ $? -ne 0 ]; then
        echo "é”™è¯¯: æ— æ³•åˆ›å»ºæ–‡ä»¶ $SYSTEM_PROP_FILE"
        exit 1
    fi
fi

# å°†å“ˆå¸Œå€¼å†™å…¥ system.prop æ–‡ä»¶
echo "ro.boot.vbmeta.digest=$HASH_VALUE" > "$SYSTEM_PROP_FILE"

# æ£€æŸ¥å†™å…¥æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "æˆåŠŸ: å“ˆå¸Œå€¼å·²å†™å…¥ $SYSTEM_PROP_FILE"
else
    echo "é”™è¯¯: æ— æ³•å†™å…¥åˆ° $SYSTEM_PROP_FILE"
    exit 1
fi

# å°† ro.boot.veritymode=enforcing è¿½åŠ å†™å…¥åˆ° system.prop æ–‡ä»¶
echo "ro.boot.veritymode=enforcing" >> "$SYSTEM_PROP_FILE"

# æ£€æŸ¥è¿½åŠ å†™å…¥æ˜¯å¦æˆåŠŸ
if [ $? -eq 0 ]; then
    echo "æˆåŠŸ: ro.boot.veritymode=enforcing å·²è¿½åŠ å†™å…¥ $SYSTEM_PROP_FILE"
else
    echo "é”™è¯¯: æ— æ³•è¿½åŠ å†™å…¥åˆ° $SYSTEM_PROP_FILE"
    exit 1
fi


MODPATH=$(dirname $0)
AVBCTL="$MODPATH/system/bin/avbctl"

[ -x "$AVBCTL" ] ||  

"$AVBCTL" disable-verity --force >/dev/null 2>&1
"$AVBCTL" disable-verification --force >/dev/null 2>&1









echo " "
echo " "
echo " "
echo " ä½œè€… bç«™@è«æ™¨åˆèœåˆçˆ±ç©"
echo " "
echo " "
echo "è«æ™¨ä¸€é”®éšè—æ¨¡å—æ›´æ–°ä»‹ç» v1.0.0"

echo " "

echo "1.æ›´æ–°zygisk1.3.0æ­£å¼ç‰ˆ æ›´æ–°éšè—åº”ç”¨åˆ—è¡¨æ­£ç‰ˆæœ€æ–°ç‰ˆ3.6.1 æ›´æ–°Ticky store1.4.1 SUSFS-FOR-KERNELSU-v1.5.2-R23ï¼Œæ›´æ–°hunter6.46"

echo " "

echo "2.æ›´æ”¹å›å¼€æœºè‡ªåŠ¨æ›´æ–°éšè—åº”ç”¨åˆ—è¡¨é…ç½®ï¼Œæ‰§è¡Œæ“ä½œæŒ‰é’®æ‰æ›´æ–°é…ç½®"

echo " "

echo "3.è‡ªåŠ¨åˆ é™¤ç›®æ ‡targetæ¸¸æˆåŒ…å"

echo " "

echo "4.å¢åŠ è«æ™¨ä¸€é”®éšè—ç¯å¢ƒé»‘åå•é…ç½®"

echo " "

echo " "

echo "æœ¬æ¨¡å—ä¸€é”®å®‰è£…è¿‡ç¯å¢ƒç»å…¸å¿…å¤‡å¥—è£… "

echo " "

echo "éšè—ä¸»åŠ›å½“ç„¶æ˜¯susfsï¼Œshamkio"

echo " "

echo "é…åˆä¸€äº›ç¯å¢ƒå°é…ç½®ã€‚å“ˆå¸Œå€¼æœ‰æ•ˆkeyç­‰ã€‚ "

echo " "

echo "è¯¦ç»†æ“ä½œè¯·æŸ¥çœ‹ä½¿ç”¨è¯´æ˜æ•™ç¨‹å›¾ç‰‡æ–‡ä»¶ "

echo " "

echo "ç®€å•æ¥è¯´å°±å¼€æœºäº†ï¼Œæ¿€æ´»éšè—åº”ç”¨åˆ—è¡¨appã€‚ç‚¹æ“ä½œæŒ‰é’®åŠ å…¥é…ç½®"


echo " "

echo " ç„¶åå†æ¬¡é‡å¯å¯åŠ¨éšè—åº”ç”¨åˆ—è¡¨app,è«æ™¨ç¯å¢ƒéšè—app"

echo " "
echo " ç„¶åå°è¯•æ‹¦æˆªæœ‰æ¬¡æ•°å°±è¡Œäº†"

echo " "

echo " æ„Ÿè°¢ä½¿ç”¨ï¼Œæ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨"
echo " "
echo " "
echo " "
echo " "
echo " "

id=most_sky
name=è«æ™¨ä¸€é”®éšè—æ¨¡å—v7.0.0
version=v7.0.0 (16-72b2e84-release)
versionCode=16
author=ä½œè€…@è«æ™¨
description=è«æ™¨ä¸€é”®éšè—æ¨¡å—æ”¯æŒæ‰€æœ‰é¢å…·
updateJson=https://raw.githubusercontent.com/mostsky/most_sky/main/version.json

#!/system/bin/sh

# è®¾ç½®è„šæœ¬æƒé™
chmod 755 /data/adb/modules/most_sky/action.sh


settings delete global hidden_api_policy
settings delete global hidden_api_policy_p_apps
settings delete global hidden_api_policy_pre_p_apps
settings delete global hidden_api_blacklist_exemptions

#DMæ£€éªŒ
MODPATH=$(dirname $0)
AVBCTL="$MODPATH/system/bin/avbctl"

[ -x "$AVBCTL" ] || exit 1  

"$AVBCTL" disable-verity --force >/dev/null 2>&1
"$AVBCTL" disable-verification --force >/dev/null 2>&1



# åˆ›å»ºå¯åŠ¨æ§åˆ¶è„šæœ¬
    echo '#!/system/bin/sh

check_reset_prop() {
  local NAME=$1
  local EXPECTED=$2
  local VALUE=$(resetprop $NAME)
  [ -z $VALUE ] || [ $VALUE = $EXPECTED ] || resetprop -n $NAME $EXPECTED
}

contains_reset_prop() {
  local NAME=$1
  local CONTAINS=$2
  local NEWVAL=$3
  [[ "$(resetprop $NAME)" = *"$CONTAINS"* ]] && resetprop -n $NAME $NEWVAL
}

resetprop -w sys.boot_completed 0

check_reset_prop "ro.boot.vbmeta.device_state" "locked"
check_reset_prop "ro.boot.verifiedbootstate" "green"
check_reset_prop "ro.boot.flash.locked" "1"
check_reset_prop "ro.boot.veritymode" "enforcing"
check_reset_prop "ro.boot.warranty_bit" "0"
check_reset_prop "ro.warranty_bit" "0"
check_reset_prop "ro.debuggable" "0"
check_reset_prop "ro.force.debuggable" "0"
check_reset_prop "ro.secure" "1"
check_reset_prop "ro.adb.secure" "1"
check_reset_prop "ro.build.type" "user"
check_reset_prop "ro.build.tags" "release-keys"
check_reset_prop "ro.vendor.boot.warranty_bit" "0"
check_reset_prop "ro.vendor.warranty_bit" "0"
check_reset_prop "vendor.boot.vbmeta.device_state" "locked"
check_reset_prop "vendor.boot.verifiedbootstate" "green"
check_reset_prop "sys.oem_unlock_allowed" "0"

# MIUI specific
check_reset_prop "ro.secureboot.lockstate" "locked"

# Realme specific
check_reset_prop "ro.boot.realmebootstate" "green"
check_reset_prop "ro.boot.realme.lockstate" "1"

# Hide that we booted from recovery when magisk is in recovery mode
contains_reset_prop "ro.bootmode" "recovery" "unknown"
contains_reset_prop "ro.boot.bootmode" "recovery" "unknown"
contains_reset_prop "vendor.boot.bootmode" "recovery" "unknown"

' > /data/adb/service.d/shamkio.sh
ro.boot.vbmeta.digest=beea19ad
ro.boot.veritymode=enforcing

#!/system/bin/sh

# åœæ­¢æœåŠ¡
killall /data/adb/service.d/shamkio.sh

sleep 1


rm -rf /data/adb/service.d/shamkio.sh



#!/bin/bash

# å®šä¹‰ç›®æ ‡æ–‡ä»¶è·¯å¾„
TARGET_FILE="/data/adb/tricky_store/target.txt"

# å®šä¹‰éœ€è¦åˆ é™¤çš„åŒ…ååˆ—è¡¨ï¼ˆåç»­æ·»åŠ ç›´æ¥åœ¨è¿™é‡ŒåŠ å…ƒç´ å³å¯ï¼‰
PACKAGES=(
    "com.tencent.tmgp.pubgmhd"
    "com.tencent.tmgp.sgame"
    "com.lilithgames.solarland.android.cn"
    #"com.tencent.tmgp.dfm"
    # è¿™é‡Œå¯ä»¥ç»§ç»­æ·»åŠ æ–°çš„åŒ…åï¼Œä¾‹å¦‚ï¼š
    # "com.example.newpackage"
)

# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
if [ ! -f "$TARGET_FILE" ]; then
    echo "é”™è¯¯ï¼šç›®æ ‡æ–‡ä»¶ $TARGET_FILE ä¸å­˜åœ¨"
    exit 1
fi

# å¤„ç†åŒ…åä¸­çš„ç‚¹å·ï¼ˆæ­£åˆ™ä¸­è½¬ä¹‰ï¼‰ï¼Œå¹¶æ‹¼æ¥æˆç”¨|åˆ†éš”çš„æ¨¡å¼å­—ç¬¦ä¸²
ESCAPED_PACKAGES=()
for pkg in "${PACKAGES[@]}"; do
    # è½¬ä¹‰ç‚¹å·ä¸º\.ï¼Œç¡®ä¿ç²¾ç¡®åŒ¹é…åŒ…å
    ESCAPED_PACKAGES+=("${pkg//./\.}")
done
PATTERN=$(IFS="|"; echo "${ESCAPED_PACKAGES[*]}")

# ä½¿ç”¨sedåˆ é™¤åŒ…å«ä»»ä½•ç›®æ ‡åŒ…åçš„è¡Œï¼Œå¹¶åˆ›å»ºå¤‡ä»½
sed -i.bak -E "/$PATTERN/d" "$TARGET_FILE"

# æ£€æŸ¥å‘½ä»¤æ‰§è¡Œç»“æœ
if [ $? -eq 0 ]; then
    echo "æˆåŠŸåˆ é™¤åŒ…å«ä»¥ä¸‹åŒ…åçš„è¡Œï¼š"
    for pkg in "${PACKAGES[@]}"; do
        echo "- $pkg"
    done
    echo "åŸå§‹æ–‡ä»¶å·²å¤‡ä»½ä¸ºï¼š$TARGET_FILE.bak"
    echo "å¦‚éœ€æ¢å¤åŸå§‹æ–‡ä»¶ï¼Œå¯æ‰§è¡Œï¼šmv $TARGET_FILE.bak $TARGET_FILE"
else
    echo "æ“ä½œå¤±è´¥ï¼Œè¯·æ£€æŸ¥æ–‡ä»¶æƒé™æˆ–å†…å®¹æ ¼å¼"
    exit 1
fi



